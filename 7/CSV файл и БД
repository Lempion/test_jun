1. Получить данные из из csv файла, путём написания функции по правильному получению данных (основные команды это
file_get_contents(),str_getcsv()).

2. Т.к у нас массив получится в виде [ 'раздел' => [товары], 'раздел' => [товары]... ], для добавления в будем будем перебирать
данные по разделам.

3. Никогда не решал подобные задачи, но предположу, что нужно в начале сделать запрос на существование данных в бд чтобы узнать, есть товар в БД
или нет, после выполнять действия:

$stmt = $dbh->prepare('SELECT EXISTS(SELECT * FROM products WHERE product =:product LIMIT 1)');
$stmt->execute(['product' => $product]);

if ($stmt->fetch(PDO::FETCH_NUM)) {
    $stmt = $dbh->prepare('UPDATE products SET price=:price... WHERE id=:id');
    $stmt->execute(['price' => $price,...,'id' => $id]);
}else{
    $stmt = $dbh->prepare('INSERT INTO 'products' ('price', ...) VALUES (':price', ...)');
    $stmt->execute(['price' => $price,...]);
}


Но получается будет произведено 10000 запросов к БД. Т.к в начале проверка, потом дейсвтие.
Возможно нужно добавлять данные в массивы, а потом каждый 50 элемент выполнять добавление массива данных в БД.
